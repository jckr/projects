var data=[
{name:"상하이",country:"중화인민공화국",lat:31.22222,lon:121.45806,tons:505715,unit:"Metric Tons",teu:25002000},
{name:"싱가포르",country:"싱가포르",lat:1.28967,lon:103.85007,tons:472300,unit:"Freight Tons",teu:25866600},
{name:"로테르담",country:"네덜란드",lat:51.9225,lon:4.47917,tons:386957,unit:"Metric Tons",teu:9743290},
{name:"톈진",country:"중화인민공화국",lat:39.14222,lon:117.17667,tons:381110,unit:"Metric Tons",teu:8700000},
{name:"닝보",country:"중화인민공화국",lat:29.87819,lon:121.54945,tons:371540,unit:"Metric Tons",teu:10502800},
{name:"광저우",country:"중화인민공화국",lat:23.11667,lon:113.25,tons:364000,unit:"Metric Tons",teu:11190000},
{name:"칭다오",country:"중화인민공화국",lat:36.09861,lon:120.37194,tons:274304,unit:"Metric Tons",teu:10280000},
{name:"친황다오",country:"중화인민공화국",lat:39.93167,lon:119.58833,tons:243850,unit:"Metric Tons",teu:0},
{name:"홍콩",country:"중화인민공화국",lat:22.28552,lon:114.15769,tons:242967,unit:"Metric Tons",teu:21040096},
{name:"부산",country:"대한민국",lat:35.10278,lon:129.04028,tons:226182,unit:"Revenue Tons",teu:11954861},
{name:"다롄",country:"중화인민공화국",lat:38.91222,lon:121.60222,tons:204000,unit:"Metric Tons",teu:4552000},
{name:"사우스루이지애나",country:"미국",lat:30.06659,lon:-90.48008,tons:192853,unit:"Metric Tons",teu:0},
{name:"휴스턴",country:"미국",lat:29.76328,lon:-95.36327,tons:191729,unit:"Metric Tons",teu:1797198},
{name:"선전",country:"중화인민공화국",lat:22.54554,lon:114.0683,tons:187045,unit:"Metric Tons",teu:18250100},
{name:"포트헤들랜드",country:"오스트레일리아",lat:-20.31,lon:118.601,tons:178625,unit:"Metric Tons",teu:0},
{name:"광양",country:"대한민국",lat:34.97528,lon:127.58917,tons:176546,unit:"Revenue Tons",teu:1810438},
{name:"울산",country:"대한민국",lat:35.53722,lon:129.31667,tons:170314,unit:"Revenue Tons",teu:0},
{name:"나고야",country:"일본",lat:35.18147,lon:136.90641,tons:165101,unit:"Freight Tons",teu:2112738},
{name:"앤트워프",country:"벨기에",lat:51.21989,lon:4.40346,tons:157807,unit:"Metric Tons",teu:7309639},
{name:"지바",country:"일본",lat:35.60472,lon:140.12333,tons:144904,unit:"Metric Tons",teu:0},
{name:"포트켈랑",country:"말레이시아",lat:3,lon:101.4,tons:137615,unit:"Metric Tons",teu:7309779},
{name:"카오슝",country:"타이완",lat:22.61626,lon:120.31333,tons:133570,unit:"Metric Tons",teu:8581273},
{name:"뉴욕/뉴저지",country:"미국",lat:40.71427,lon:-74.00597,tons:131262,unit:"Metric Tons",teu:4561528},
{name:"인천",country:"대한민국",lat:37.45361,lon:126.73167,tons:122128,unit:"Revenue Tons",teu:1559425},
{name:"요코하마",country:"일본",lat:35.44778,lon:139.6425,tons:115529,unit:"Freight Tons",teu:2555000},
{name:"하문",country:"중화인민공화국",lat:24.47979,lon:118.08187,tons:110963,unit:"Metric Tons",teu:4680355},
{name:"함부르크",country:"독일",lat:53.55,lon:10,tons:110381,unit:"Metric Tons",teu:7007704},
{name:"옌톈",country:"중화인민공화국",lat:22.5741666666667,lon:114.100555555556,tons:107563,unit:"Metric Tons",teu:0},
{name:"이타규이",country:"브라질",lat:-29.12528,lon:-56.55306,tons:105026,unit:"Metric Tons",teu:0},
{name:"뉴캐슬",country:"오스트레일리아",lat:-32.92715,lon:151.77647,tons:103027,unit:"Metric Tons",teu:0},
{name:"광역밴쿠버항",country:"캐나다",lat:49.24966,lon:-123.11934,tons:101888,unit:"Metric Tons",teu:2152468},
{name:"헤이포인트",country:"오스트레일리아",lat:-21.283333,lon:149.3,tons:99475,unit:"Metric Tons",teu:0},
{name:"탄정펠레파스",country:"말레이시아",lat:1.366347,lon:103.548367,tons:90447,unit:"Metric Tons",teu:5835085},
{name:"암스테르담 포츠",country:"네덜란드",lat:52.37403,lon:4.88969,tons:86678,unit:"Metric Tons",teu:0},
{name:"노보로시스크",country:"러시아",lat:44.72439,lon:37.76752,tons:86519,unit:"Metric Tons",teu:0},
{name:"세페티바",country:"브라질",lat:-22.983333,lon:-43.7,tons:86420,unit:"Metric Tons",teu:0},
{name:"기타큐슈",country:"일본",lat:33.83333,lon:130.83333,tons:84941,unit:"Freight Tons",teu:0},
{name:"투바라오",country:"브라질",lat:-28.466667,lon:-49.006944,tons:83835,unit:"Metric Tons",teu:0},
{name:"산토스",country:"브라질",lat:-23.96083,lon:-46.33361,tons:83194,unit:"Metric Tons",teu:2255862},
{name:"마르세유",country:"프랑스",lat:43.29695,lon:5.38107,tons:83194,unit:"Metric Tons",teu:876757},
{name:"오사카",country:"일본",lat:34.69374,lon:135.50218,tons:80944,unit:"Freight Tons",teu:1843067},
{name:"프리모르스크",country:"러시아",lat:60.70763,lon:28.75283,tons:79138,unit:"Metric Tons",teu:0},
{name:"리처즈베이",country:"남아프리카 공화국",lat:-28.78301,lon:32.03768,tons:77631,unit:"Metric Tons",teu:0},
{name:"고베",country:"일본",lat:34.6913,lon:135.183,tons:77027,unit:"Freight Tons",teu:2247024},
{name:"르아브르",country:"프랑스",lat:49.4938,lon:0.10767,tons:73768,unit:"Metric Tons",teu:2240714},
{name:"도쿄",country:"일본",lat:35.6895,lon:139.69171,tons:72259,unit:"Freight Tons",teu:3810769},
{name:"알헤시라스-라리니아",country:"스페인",lat:36.13326,lon:-5.45051,tons:69911,unit:"Metric Tons",teu:3043268},
{name:"롱비치",country:"미국",lat:33.76696,lon:-118.18923,tons:65772,unit:"Metric Tons",teu:5067597},
{name:"대산",country:"대한민국",lat:36.783333,lon:126.45,tons:64716,unit:"Revenue Tons",teu:0},
{name:"반다르아바스",country:"이란",lat:27.186389,lon:56.277222,tons:64454,unit:"Metric Tons",teu:2206476},
{name:"브레멘/브레머하펜",country:"독일",lat:53.07516,lon:8.80777,tons:63106,unit:"Metric Tons",teu:4578642},
{name:"코퍼스크리스티",country:"미국",lat:27.80058,lon:-97.39638,tons:61907,unit:"Metric Tons",teu:0},
{name:"뉴올리언스, LA",country:"미국",lat:29.95465,lon:-90.07507,tons:61804,unit:"Metric Tons",teu:0},
{name:"보몬트",country:"미국",lat:30.08605,lon:-94.10185,tons:61431,unit:"Metric Tons",teu:0},
{name:"첸나이",country:"인도",lat:13.104224,lon:80.29727,tons:61057,unit:"Metric Tons",teu:1216438},
{name:"자와할랄 네루 (나바 셔바)",country:"인도",lat:18.95,lon:72.95,tons:60746,unit:"Metric Tons",teu:4061343},
{name:"포항",country:"대한민국",lat:36.032222,lon:129.365,tons:58687,unit:"Revenue Tons",teu:0},
{name:"발렌시아",country:"스페인",lat:39.46975,lon:-0.37739,tons:57502,unit:"Metric Tons",teu:3653890},
{name:"파란딥",country:"인도",lat:20.32,lon:86.62,tons:57011,unit:"Metric Tons",teu:0},
{name:"살단하베이",country:"남아프리카 공화국",lat:-33.016667,lon:17.95,tons:56476,unit:"Metric Tons",teu:0},
{name:"베르겐",country:"노르웨이",lat:60.39299,lon:5.32415,tons:56138,unit:"Metric Tons",teu:0},
{name:"그림즈비와 이밍햄",country:"영국",lat:53.5595,lon:-0.068,tons:54708,unit:"Metric Tons",teu:0},
{name:"뭄바이",country:"인도",lat:19.07283,lon:72.88261,tons:54540,unit:"Metric Tons",teu:0},
{name:"헌팅턴",country:"미국",lat:38.41925,lon:-82.44515,tons:53680,unit:"Metric Tons",teu:0},
{name:"로스앤젤레스",country:"미국",lat:33.729186,lon:-118.262015,tons:52986,unit:"Metric Tons",teu:6748994},
{name:"햄프턴 로즈",country:"미국",lat:36.966667,lon:-76.366667,tons:52952,unit:"Metric Tons",teu:1745228},
{name:"타이중",country:"타이완",lat:24.1469,lon:120.6839,tons:52747,unit:"Metric Tons",teu:1193943},
{name:"카요아르카스",country:"멕시코",lat:19.85,lon:-90.53333,tons:51818,unit:"Metric Tons",teu:0},
{name:"세인트피터즈버그",country:"러시아",lat:59.89444,lon:30.26417,tons:50406,unit:"Metric Tons",teu:1341850},
{name:"성세바스찌엉",country:"브라질",lat:-23.4536,lon:-45.2436,tons:50155,unit:"Metric Tons",teu:0},
{name:"모무가오",country:"인도",lat:15.4,lon:73.8,tons:48847,unit:"Metric Tons",teu:0},
{name:"필라델피아",country:"미국",lat:39.95234,lon:-75.16379,tons:48763,unit:"Metric Tons",teu:0},
{name:"텍사스시티",country:"미국",lat:29.38384,lon:-94.9027,tons:47748,unit:"Metric Tons",teu:0},
{name:"레이크찰스",country:"미국",lat:30.21309,lon:-93.2044,tons:47403,unit:"Metric Tons",teu:0},
{name:"모빌",country:"미국",lat:30.69436,lon:-88.04305,tons:47373,unit:"Metric Tons",teu:0},
{name:"그레이터 배턴 루지",country:"미국",lat:30.45075,lon:-91.15455,tons:47100,unit:"Metric Tons",teu:0},
{name:"람차방",country:"타이",lat:13.083333,lon:100.883333,tons:47072,unit:"Metric Tons",teu:4537833},
{name:"제노아",country:"이탈리아",lat:44.40667,lon:8.93333,tons:46563,unit:"Metric Tons",teu:1533627},
{name:"캘커타",country:"인도",lat:22.56972,lon:88.36972,tons:46295,unit:"Metric Tons",teu:0},
{name:"플락민",country:"미국",lat:29.852222,lon:-89.998333,tons:46149,unit:"Metric Tons",teu:0},
{name:"알렉산드리아와 엘데케일라",country:"이집트",lat:31.21564,lon:29.95527,tons:45465,unit:"Metric Tons",teu:0},
{name:"런던",country:"영국",lat:51.5,lon:0.05,tons:45442,unit:"Metric Tons",teu:0},
{name:"덩케르크",country:"프랑스",lat:51.05,lon:2.36667,tons:45023,unit:"Metric Tons",teu:0},
{name:"제브리헤",country:"벨기에",lat:51.333333,lon:3.2,tons:44866,unit:"Metric Tons",teu:2328198},
{name:"트리에스테",country:"이탈리아",lat:45.64861,lon:13.78,tons:44393,unit:"Metric Tons",teu:0},
{name:"콜롬보",country:"스리랑카",lat:-25.29167,lon:-49.22417,tons:43799,unit:"Metric Tons",teu:3464297},
{name:"마닐라",country:"필리핀",lat:14.6042,lon:120.9822,tons:43780,unit:"Metric Tons",teu:2815004},
{name:"주바일",country:"사우디아라비아",lat:27,lon:49.666667,tons:43089,unit:"Metric Tons",teu:0},
{name:"콘스탄자",country:"루마니아",lat:44.18333,lon:28.65,tons:42014,unit:"Metric Tons",teu:607483},
{name:"바르셀로나",country:"스페인",lat:41.38879,lon:2.15899,tons:41781,unit:"Metric Tons",teu:1800214},
{name:"탄중 프리옥",country:"인도네시아",lat:-6.133333,lon:106.9,tons:41546,unit:"Metric Tons",teu:3800000},
{name:"산로렌츠-산마틴",country:"아르헨티나",lat:-32.741,lon:-60.745,tons:41477,unit:"Metric Tons",teu:0},
{name:"제다",country:"사우디아라비아",lat:21.51694,lon:39.21917,tons:40934,unit:"Metric Tons",teu:3091312},
{name:"칼레",country:"프랑스",lat:50.9581,lon:1.85205,tons:40785,unit:"Metric Tons",teu:0},
{name:"밀포드헤이븐",country:"영국",lat:51.71418,lon:-5.04274,tons:39292,unit:"Metric Tons",teu:0},
{name:"티즈와 하트풀",country:"영국",lat:54.69,lon:-1.21,tons:39163,unit:"Metric Tons",teu:0},
{name:"고센버그",country:"스웨덴",lat:57.70716,lon:11.96679,tons:38934,unit:"Metric Tons",teu:817616},
{name:"이즈미트 (코자엘리)",country:"터키",lat:40.76694,lon:29.91694,tons:38769,unit:"Metric Tons",teu:0},
{name:"카라치",country:"파키스탄",lat:24.9056,lon:67.0822,tons:38732,unit:"Metric Tons",teu:1307000},
{name:"더반",country:"남아프리카 공화국",lat:-29.8579,lon:31.0292,tons:37419,unit:"Metric Tons",teu:2523105},
{name:"사우샘프턴",country:"영국",lat:50.90395,lon:-1.40428,tons:37227,unit:"Metric Tons",teu:1400000},
{name:"포스 포츠",country:"영국",lat:56.026785,lon:-3.180542,tons:36690,unit:"Metric Tons",teu:0},
{name:"뉴망갈로르",country:"인도",lat:12.91723,lon:74.85603,tons:35528,unit:"Metric Tons",teu:0},
{name:"앙그라두스헤이스",country:"브라질",lat:-23.00667,lon:-44.31806,tons:35491,unit:"Metric Tons",teu:0},
{name:"지오이아타우로",country:"이탈리아",lat:38.42397,lon:15.899,tons:34394,unit:"Metric Tons",teu:2857438},
{name:"빌헬름스파헨",country:"독일",lat:53.51667,lon:8.13333,tons:33577,unit:"Metric Tons",teu:0},
{name:"파스카굴라 (미국 미시시피 주)",country:"미국",lat:30.36576,lon:-88.55613,tons:33219,unit:"Metric Tons",teu:0},
{name:"호치민",country:"베트남",lat:10.75,lon:106.66667,tons:33000,unit:"Metric Tons",teu:3563246},
{name:"얀부",country:"사우디아라비아",lat:24.08228,lon:38.065567,tons:32987,unit:"Metric Tons",teu:0},
{name:"반다르호메이니",country:"이란",lat:30.435556,lon:49.105556,tons:32704,unit:"Metric Tons",teu:0},
{name:"브리즈번",country:"오스트레일리아",lat:-27.46794,lon:153.02809,tons:32119,unit:"Metric Tons",teu:918998},
{name:"탐파",country:"미국",lat:27.94752,lon:-82.45843,tons:31650,unit:"Metric Tons",teu:0},
{name:"빌바오",country:"스페인",lat:43.26271,lon:-2.92528,tons:31604,unit:"Metric Tons",teu:0},
{name:"탈린",country:"에스토니아",lat:59.43696,lon:24.75353,tons:31597,unit:"Metric Tons",teu:0},
{name:"타라고나",country:"스페인",lat:41.11667,lon:1.25,tons:31310,unit:"Metric Tons",teu:0},
{name:"발데스",country:"미국",lat:61.130833,lon:-146.348333,tons:31274,unit:"Metric Tons",teu:0},
{name:"포트켐블라",country:"오스트레일리아",lat:-34.466667,lon:150.9,tons:31045,unit:"Revenue Tons",teu:0},
{name:"포트아서",country:"미국",lat:29.89883,lon:-93.92878,tons:30667,unit:"Metric Tons",teu:0},
{name:"파라나과",country:"브라질",lat:-25.52,lon:-48.508889,tons:30630,unit:"Metric Tons",teu:630597},
{name:"치타공",country:"방글라데시",lat:22.33306,lon:91.83639,tons:30483,unit:"metric tons",teu:1161470},
{name:"멜버른",country:"오스트레일리아",lat:-37.814,lon:144.96332,tons:30480,unit:"Metric Tons",teu:2236633},
{name:"리버풀/머지사이드",country:"영국",lat:-33.9,lon:150.93333,tons:29936,unit:"Metric Tons",teu:588053},
{name:"피츠버그",country:"미국",lat:40.44062,lon:-79.99589,tons:29839,unit:"Metric Tons",teu:0},
{name:"낭트 생 나제흐",country:"프랑스",lat:47.21725,lon:-1.55336,tons:29752,unit:"Metric Tons",teu:0},
{name:"리가",country:"라트비아",lat:56.946,lon:24.10589,tons:29724,unit:"Metric Tons",teu:0},
{name:"두바이 포츠",country:"아랍에미리트",lat:1.28967,lon:103.85007,tons:0,unit:"",teu:11124082},
{name:"포트켈랑",country:"말레이시아",lat:3,lon:101.4,tons:0,unit:"",teu:7309779},
{name:"탄정펠레파스",country:"말레이시아",lat:1.366347,lon:103.548367,tons:0,unit:"",teu:5835085},
{name:"미나 라이수트 (살랄라)",country:"오만",lat:16.948056,lon:54.008889,tons:0,unit:"",teu:3493459},
{name:"포트사이드",country:"이집트",lat:31.25654,lon:32.28412,tons:0,unit:"",teu:3300951},
{name:"펠릭스토",country:"영국",lat:51.954171,lon:1.310158,tons:0,unit:"",teu:3100000},
{name:"롄윈강",country:"중화인민공화국",lat:34.6,lon:119.166667,tons:0,unit:"",teu:3020800},
{name:"코파칸",country:"아랍에미리트",lat:25.333333,lon:56.35,tons:0,unit:"",teu:2750285},
{name:"잉커우",country:"중화인민공화국",lat:40.666667,lon:122.233333,tons:0,unit:"",teu:2537000},
{name:"서배너",country:"미국",lat:32.08354,lon:-81.09983,tons:0,unit:"",teu:2356511},
{name:"마색슬록",country:"몰타",lat:35.841667,lon:14.544722,tons:0,unit:"",teu:2260000},
{name:"오클랜드",country:"미국",lat:37.795533,lon:-122.284603,tons:0,unit:"",teu:2045211},
{name:"발보아",country:"파나마",lat:8.95,lon:-79.566667,tons:0,unit:"",teu:2011778},
{name:"시드니 포츠",country:"오스트레일리아",lat:-33.856111,lon:151.1925,tons:0,unit:"",teu:1927507},
{name:"암발리",country:"터키",lat:40.969044,lon:28.67481,tons:0,unit:"",teu:1836030},
{name:"킹스턴",country:"자메이카",lat:17.979345,lon:-76.83442,tons:0,unit:"",teu:1692811},
{name:"산후안",country:"미국",lat:18.45,lon:-66.066667,tons:0,unit:"",teu:1673745},
{name:"시애틀",country:"미국",lat:47.60621,lon:-122.33207,tons:0,unit:"",teu:1584596},
{name:"지룽",country:"타이완",lat:25.133333,lon:121.733333,tons:0,unit:"",teu:1577824},
{name:"터코마 ",country:"미국",lat:47.270494,lon:-122.411728,tons:0,unit:"",teu:1545853},
{name:"타이창",country:"중화인민공화국",lat:31.447778,lon:121.093889,tons:0,unit:"",teu:1510000},
{name:"부에노스아이레스 (엑솔겐 포함)",country:"아르헨티나",lat:-34.61315,lon:-58.37723,tons:0,unit:"",teu:1412462},
{name:"만사니요",country:"파나마",lat:9.361958,lon:-79.882089,tons:0,unit:"",teu:1406030},
{name:"몬트리올",country:"캐나다",lat:45.505204,lon:-73.548918,tons:0,unit:"",teu:1247690},
{name:"담맘",country:"사우디아라비아",lat:26.499458,lon:50.197821,tons:0,unit:"",teu:1227392},
{name:"방콕",country:"타이",lat:13.75398,lon:100.50144,tons:0,unit:"",teu:1222048},
{name:"탕헤르",country:"모로코",lat:35.76727,lon:-5.79975,tons:0,unit:"",teu:1222000},
{name:"다미에타",country:"이집트",lat:31.41648,lon:31.81332,tons:0,unit:"",teu:1213187},
{name:"찰스턴",country:"미국",lat:32.83548,lon:-79.890175,tons:0,unit:"",teu:1181353},
{name:"난징",country:"중화인민공화국",lat:32.06167,lon:118.77778,tons:0,unit:"",teu:1160300},
{name:"카르타헤나 (SPRC, 엘보스코, 콘테카르 포함)",country:"콜롬비아",lat:10.377064,lon:-75.509076,tons:0,unit:"",teu:1141873},
{name:"하이파",country:"이스라엘",lat:32.81556,lon:34.98917,tons:0,unit:"",teu:1140000},
{name:"만사니요",country:"멕시코",lat:19.05011,lon:-104.31879,tons:0,unit:"",teu:1110350},
{name:"카야오",country:"페루",lat:-12.06667,lon:-77.15,tons:0,unit:"",teu:1089837},
{name:"호놀룰루",country:"미국",lat:21.30694,lon:-157.85833,tons:0,unit:"",teu:1049420},
{name:"라스페치아",country:"이탈리아",lat:44.11054,lon:9.84339,tons:0,unit:"",teu:1046063},
{name:"라스팔마스",country:"스페인",lat:28.137697,lon:-15.415106,tons:0,unit:"",teu:1007207},
{name:"베이루트",country:"레바논",lat:33.88894,lon:35.49442,tons:0,unit:"",teu:994601},
{name:"페낭",country:"말레이시아",lat:5.419426,lon:100.361331,tons:0,unit:"",teu:958476},
{name:"아슈도드",country:"이스라엘",lat:31.81667,lon:34.65,tons:0,unit:"",teu:893000},
{name:"과야킬",country:"에콰도르",lat:-2.16667,lon:-79.9,tons:0,unit:"",teu:884100},
{name:"조호르",country:"말레이시아",lat:1.366347,lon:103.548367,tons:0,unit:"",teu:844856},
{name:"메르신",country:"터키",lat:36.802962,lon:34.647446,tons:0,unit:"",teu:843917},
{name:"오클랜드",country:"뉴질랜드",lat:-36.86667,lon:174.76667,tons:0,unit:"",teu:843590},
{name:"이즈미르",country:"터키",lat:38.41273,lon:27.13838,tons:0,unit:"",teu:821591},
{name:"마이애미",country:"미국",lat:25.774542,lon:-80.167751,tons:0,unit:"",teu:807069},
{name:"포트에버글레이즈",country:"미국",lat:26.095137,lon:-80.121789,tons:0,unit:"",teu:796160},
{name:"푸에르토카벨로",country:"베네수엘라",lat:10.468906,lon:-68.002796,tons:0,unit:"",teu:791813},
{name:"케이프타운",country:"남아프리카 공화국",lat:-33.92584,lon:18.42322,tons:0,unit:"",teu:766127},
{name:"카사블랑카",country:"모로코",lat:33.59278,lon:-7.61916,tons:0,unit:"",teu:760883},
{name:"잭슨빌",country:"미국",lat:30.389535,lon:-81.540098,tons:0,unit:"",teu:754352},
{name:"빈 카심",country:"파키스탄",lat:24.924444,lon:66.973611,tons:0,unit:"",teu:751056},
{name:"리몽-모인",country:"코스타리카",lat:9.990427,lon:-83.02233,tons:0,unit:"",teu:748029},
{name:"타란토",country:"이탈리아",lat:40.47611,lon:17.22972,tons:0,unit:"",teu:741428},
{name:"슈웨이크",country:"쿠웨이트",lat:29.35,lon:47.95,tons:0,unit:"",teu:732560},
{name:"산안토니오",country:"칠레",lat:-33.59333,lon:-71.62167,tons:0,unit:"",teu:729033},
{name:"하카타",country:"일본",lat:33.591389,lon:130.414722,tons:0,unit:"",teu:722826},
{name:"발파라이소",country:"칠레",lat:-33.032197,lon:-71.627641,tons:0,unit:"",teu:677432},
{name:"피레우스",country:"그리스",lat:37.948902,lon:23.638737,tons:0,unit:"",teu:667135},
{name:"리우그란데",country:"브라질",lat:-32.040995,lon:-52.075496,tons:0,unit:"",teu:629586},
{name:"몸바사",country:"케냐",lat:-4.044659,lon:39.627889,tons:0,unit:"",teu:618816},
{name:"아비장",country:"코트디부아르",lat:5.271756,lon:-4.013057,tons:0,unit:"",teu:610585},
{name:"이타자이/나바간테스",country:"브라질",lat:-26.89687,lon:-48.663168,tons:0,unit:"",teu:593359},
{name:"레그혼",country:"이탈리아",lat:43.555406,lon:10.298824,tons:0,unit:"",teu:592050},
{name:"몬테비데오",country:"우루과이",lat:-34.902193,lon:-56.208673,tons:0,unit:"",teu:588410}];

var margin = {top: 0, right: 0, bottom: 0, left: 0},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var lang="eng";
if(window.location.search=="?lang=kor") {lang="kor";}


var projection = d3.geo.mercator()
    .scale(width)
    .translate([width / 2, height / 2]);

var mode=0;
var centered=null;
var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("#chart").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")

svg.append("rect")
    .attr("class", "frame")
    .attr("width", width)
    .attr("height", height)
    .on("click",function() {click();})
    .on("dblclick",reset)


var g = svg.append("g"),
    feature = g.selectAll(".feature");

feature = feature.data(collection.features)
    .enter().append("path")
      .attr("class", "feature")
      .attr("d", path)
      .on("click",click);

d3.select("#tons").on("click",function() {
	d3.select("#tons").classed("active",1);
	d3.select("#container").classed("active",0);
	circles.transition().attr("r",function(d) {return d.r1;}).style("fill","steelblue");
	d3.select("#legend").classed("interaface12-4",0).classed("interaface12-3",1).html("천 톤 단위");
	mode=0;})
	
d3.select("#container").on("click",function() {
	d3.select("#tons").classed("active",0);
	d3.select("#container").classed("active",1);
	circles.transition().attr("r",function(d) {return d.r2;}).style("fill","red");
	d3.select("#legend").classed("interaface12-4",1).classed("interaface12-3",0).html("컨테이너 수량 단위(TEU)");
	mode=1;})
var target=svg.append("circle").classed("target",1);
function click(d) {
  var x = 0,
      y = 0,
      k = 1;

  var e=d3.event;
  d3.selectAll(".selected").classed("selected",0);
  if(d) {d3.select(this).classed("selected",1);}
  if (d && centered !== d) {
    var centroid = path.centroid(d);
    x = -centroid[0];
    y = -centroid[1];
    k = 3;
    centered = d;
  } else {
    centered = null;
    if(d){d3.select(this).classed("selected",0)}
  }

  svg.transition()
      .duration(1000)
      .attr("transform", "scale(" + k + ")translate(" + (x+80) + "," + (y+20) + ")")
}

function reset() {
projection = d3.geo.mercator()
    .scale(width)
    .translate([width / 2, height / 2]);
svg.transition().duration(1000).attr("transform", "translate(" + margin.left + "," + margin.top + ")");
}


var 
idToNode = {},
links = [],
nodes = data.map(function(d,i) {
	var xy = projection([d.lon,d.lat]);
	return idToNode[d.id] = {
		index:i,
		x: xy[0],
		y: xy[1],
		lat:d.lat,
		lon:d.lon,
		gravity: {x: xy[0], y: xy[1]},
		r1: Math.sqrt(d.tons/(1.5*projection.scale())),
		r2: Math.sqrt(d.teu/(50*projection.scale())),
		value: d.teu,
		ton:d.tons,
		teu:d.teu,
		name:d.name,
		unit:d.unit!=""?("("+d.unit+")"):""
	};
});

function changeLang() {
	lang=(lang=='eng')?'kor':'eng';
	window.location.search="?lang="+lang;
	
	//d3.select("#cPanel").selectAll("a").html(function(d) {return d.countrylabel[lang];})
}

var circles=svg.selectAll("circle")
	.data(nodes)
	.enter().append("circle")
	.style("fill", "steelblue")
	.attr("cx", function(d) { return d.x; })
	.attr("cy", function(d) { return d.y; })
	.attr("r", function(d, i) { return d.r1; })
	.style("opacity",.5);	
circles.append("title")
	.text(function(d) {
		var title="<strong>"+d.name+"<strong>: </br>";
		if(d.ton){title+=d3.format(",")(d.ton)+" "+d.unit+" </br>";}
		if(d.teu){title+=d3.format(",")(d.teu)+" TEUs";}
		return title;})



$('circle').tipsy({html: true, gravity: 's'});

